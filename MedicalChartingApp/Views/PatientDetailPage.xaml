<?xml version="1.0" encoding="UTF-8"?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="MedicalChartingApp.Views.PatientDetailPage"
    Title="Patient Details">

  <ScrollView>
    <VerticalStackLayout Padding="16" Spacing="8">

      <Entry Placeholder="Name" Text="{Binding Item.Name}" />
      <Entry Placeholder="Address" Text="{Binding Item.Address}" />
      <Entry Placeholder="Race" Text="{Binding Item.Race}" />
      <Entry Placeholder="Gender" Text="{Binding Item.Gender}" />
      <Entry Placeholder="Birthdate (MM/dd/yyyy)" x:Name="DobEntry" />

      <Button Text="Save" Command="{Binding SaveCommand}" Clicked="OnSaveClicked"/>

      <Label Text="Medical Notes" FontAttributes="Bold" Margin="0,12,0,4" />

      <Entry Placeholder="Add diagnosis/prescription note..."
             Text="{Binding NewNoteText}" />

      <Button Text="Add Note" Command="{Binding AddNoteCommand}" />

      <CollectionView ItemsSource="{Binding Notes}" Margin="0,8,0,0">
        <CollectionView.ItemTemplate>
          <DataTemplate>
            <VerticalStackLayout Padding="4">
              <Label FontSize="12"
                     Text="{Binding Timestamp, StringFormat='{}{0:MM/dd/yyyy HH:mm}'}" />
              <Label Text="{Binding Text}" />
            </VerticalStackLayout>
          </DataTemplate>
        </CollectionView.ItemTemplate>
      </CollectionView>

    </VerticalStackLayout>
  </ScrollView>
</ContentPage>
